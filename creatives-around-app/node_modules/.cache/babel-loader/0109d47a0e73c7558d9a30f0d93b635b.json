{"ast":null,"code":"import _regeneratorRuntime from\"/home/karol/Projects/creatives/creatives-around-frontend/creatives-around-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/home/karol/Projects/creatives/creatives-around-frontend/creatives-around-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/home/karol/Projects/creatives/creatives-around-frontend/creatives-around-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/karol/Projects/creatives/creatives-around-frontend/creatives-around-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/karol/Projects/creatives/creatives-around-frontend/creatives-around-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";var DataService=/*#__PURE__*/function(){function DataService(app){_classCallCheck(this,DataService);this.app=app;this.app.state={user:null};this.setUp();}_createClass(DataService,[{key:\"setUp\",value:function(){var _setUp=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var user;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return this.fetchUser();case 2:user=_context.sent;this.app.setState(_objectSpread({},this.app.state,{user:user}));case 4:case\"end\":return _context.stop();}}},_callee,this);}));function setUp(){return _setUp.apply(this,arguments);}return setUp;}()},{key:\"fetchUser\",value:function(){var _fetchUser=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var response,user;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch('/api/user');case 2:response=_context2.sent;_context2.next=5;return response.json();case 5:user=_context2.sent;return _context2.abrupt(\"return\",user);case 7:case\"end\":return _context2.stop();}}},_callee2);}));function fetchUser(){return _fetchUser.apply(this,arguments);}return fetchUser;}()},{key:\"createUser\",value:function(){var _createUser=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(user){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return fetch('/api/user',{method:'POST',headers:{'content-type':'application/json'},body:JSON.stringify(user)});case 3:console.log('User successfuly created');_context3.next=9;break;case 6:_context3.prev=6;_context3.t0=_context3[\"catch\"](0);console.error(_context3.t0);case 9:case\"end\":return _context3.stop();}}},_callee3,null,[[0,6]]);}));function createUser(_x){return _createUser.apply(this,arguments);}return createUser;}()},{key:\"data\",get:function get(){return this.app.state;},set:function set(newState){this.app.setState(newState);}}]);return DataService;}();export{DataService as default};","map":{"version":3,"sources":["/home/karol/Projects/creatives/creatives-around-frontend/creatives-around-app/src/context/DataService.js"],"names":["DataService","app","state","user","setUp","fetchUser","setState","fetch","response","json","method","headers","body","JSON","stringify","console","log","error","newState"],"mappings":"i9BAAqBA,CAAAA,W,yBACnB,qBAAYC,GAAZ,CAAiB,mCACf,KAAKA,GAAL,CAAWA,GAAX,CACA,KAAKA,GAAL,CAASC,KAAT,CAAiB,CAAEC,IAAI,CAAE,IAAR,CAAjB,CACA,KAAKC,KAAL,GACD,C,6RAQoB,MAAKC,SAAL,E,QAAbF,I,eACN,KAAKF,GAAL,CAASK,QAAT,kBAAuB,KAAKL,GAAL,CAASC,KAAhC,EAAuCC,IAAI,CAAJA,IAAvC,I,gaAGuBI,CAAAA,KAAK,CAAC,WAAD,C,QAAtBC,Q,uCACaA,CAAAA,QAAQ,CAACC,IAAT,E,QAAbN,I,iDACCA,I,8QAEQA,I,8JAEPI,CAAAA,KAAK,CAAC,WAAD,CAAc,CACvBG,MAAM,CAAE,MADe,CAEvBC,OAAO,CAAE,CACP,eAAgB,kBADT,CAFc,CAKvBC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAeX,IAAf,CALiB,CAAd,C,QAOXY,OAAO,CAACC,GAAR,CAAY,0BAAZ,E,kFAEAD,OAAO,CAACE,KAAR,e,+LA1BO,CACT,MAAO,MAAKhB,GAAL,CAASC,KAAhB,CACD,C,kBACQgB,Q,CAAU,CACjB,KAAKjB,GAAL,CAASK,QAAT,CAAkBY,QAAlB,EACD,C,kCAXkBlB,W","sourcesContent":["export default class DataService {\n  constructor(app) {\n    this.app = app;\n    this.app.state = { user: null };\n    this.setUp();\n  }\n  get data() {\n    return this.app.state;\n  }\n  set data(newState) {\n    this.app.setState(newState);\n  }\n  async setUp() {\n    const user = await this.fetchUser();\n    this.app.setState({ ...this.app.state, user });\n  }\n  async fetchUser() {\n    const response = await fetch('/api/user');\n    const user = await response.json();\n    return user;\n  }\n  async createUser(user) {\n    try {\n      await fetch('/api/user', {\n        method: 'POST',\n        headers: {\n          'content-type': 'application/json',\n        },\n        body: JSON.stringify(user),\n      });\n      console.log('User successfuly created');\n    } catch (error) {\n      console.error(error);\n    }\n  }\n}\n"]},"metadata":{},"sourceType":"module"}